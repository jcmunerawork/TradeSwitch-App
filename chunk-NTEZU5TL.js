import{a as xe}from"./chunk-K32DDES3.js";import"./chunk-BFDJ3X5L.js";import"./chunk-BYXBJQAS.js";import{c as L,f as R,i as W,k as ue,o as ge,p as be,q as _e,r as fe,s as he,v as T}from"./chunk-TB2EFIJE.js";import{a as me}from"./chunk-4QJ6BWDT.js";import{b as F,c as A,d as re,e as Z,f as ie,g as oe,h as ae,i as se,j as B,l as le,m as de,q as Se,t as Me,u as Pe,v as ce}from"./chunk-RJHESVFE.js";import{$b as O,Ha as l,Ib as te,Jb as V,Kc as N,Ma as k,Mb as r,Nb as P,Ob as b,Oc as E,Pb as I,Rb as w,Sa as U,Sb as v,Sc as ne,Tb as S,W as K,Za as h,_ as Q,bc as D,dd as pe,ea as c,fa as m,gb as x,hb as C,ib as Y,jb as $,kb as ee,lb as _,mb as t,nb as n,ob as M,vb as y,xb as p,ya as X,zb as g}from"./chunk-UAHZMN6X.js";import"./chunk-CSZLD3FT.js";import{a as G,b as H,i as ve,k as f}from"./chunk-BI7C37SH.js";function Ee(d,o){if(d&1){let i=y();t(0,"div",16)(1,"label",29),r(2,"% Strat. Followed:"),n(),t(3,"div",30)(4,"input",31),S("ngModelChange",function(a){c(i);let s=g();return v(s.initialMinStrat,a)||(s.initialMinStrat=a),m(a)}),n(),t(5,"label",32),r(6,"min %"),n()(),t(7,"div",30)(8,"input",33),S("ngModelChange",function(a){c(i);let s=g();return v(s.initialMaxStrat,a)||(s.initialMaxStrat=a),m(a)}),n(),t(9,"label",34),r(10,"max %"),n()(),t(11,"button",35),p("click",function(){c(i);let a=g();return m(a.apply())}),r(12," Apply "),n()()}if(d&2){let i=g();l(4),w("ngModel",i.initialMinStrat),l(4),w("ngModel",i.initialMaxStrat)}}function Te(d,o){if(d&1&&(r(0),t(1,"div",40)(2,"div",41),M(3,"div",42),n()()),d&2){let i=g().$implicit;b(" ",i.strategy_followed,"% "),l(3),V("width",i.strategy_followed,"%")}}function ke(d,o){d&1&&(t(0,"span"),r(1,"No stats available"),n())}function Oe(d,o){if(d&1){let i=y();t(0,"tr")(1,"td",36)(2,"p"),r(3),n()(),t(4,"td",37)(5,"p"),r(6),n()(),t(7,"td",38)(8,"p"),r(9),n()(),t(10,"td",38)(11,"p"),r(12),n()(),t(13,"td",38)(14,"p"),r(15),O(16,"date"),n()(),t(17,"td"),x(18,Te,4,3),x(19,ke,2,0,"span"),n(),t(20,"td",38)(21,"span",39),p("click",function(){let a=c(i).$implicit,s=g();return m(s.emitUser(a))}),r(22,"info"),n()()()}if(d&2){let i=o.$implicit,e=g();l(3),b(" ",i.firstName," "),l(3),b(" ",i.lastName," "),l(3),b(" ",i.email," "),l(3),b(" ",i.phoneNumber," "),l(3),b(" ",D(16,7,e.getUserDate(i.subscription_date),"dd/MM/yyyy")," "),l(3),C(i.strategy_followed!==void 0?18:-1),l(),C(i.strategy_followed===void 0?19:-1)}}var j=class d{users=[];userSelected=new h;initialMinStrat=0;initialMaxStrat=100;showFilter=!1;currentPage=1;itemsPerPage=10;sortField="firstName";sortAsc=!0;_searchTerm="";get searchTerm(){return this._searchTerm}set searchTerm(o){this._searchTerm=o,this.goToPage(1)}get filteredUsers(){let o=this._searchTerm.trim().toLowerCase(),i=this.users.filter(e=>{let a=`${e.firstName} ${e.lastName}`.toLowerCase().includes(o),s=e.strategy_followed>=this.initialMinStrat,u=e.strategy_followed<=this.initialMaxStrat;return e.strategy_followed===void 0&&(s=!0,u=!0),this.showFilter?a:a&&s&&u});return i=i.sort((e,a)=>{let s=e[this.sortField].toLowerCase(),u=a[this.sortField].toLowerCase();return s<u?this.sortAsc?-1:1:s>u?this.sortAsc?1:-1:0}),i}get paginatedUsers(){let o=(this.currentPage-1)*this.itemsPerPage,i=o+this.itemsPerPage;return this.filteredUsers.slice(o,i)}get totalPages(){return Math.ceil(this.filteredUsers.length/this.itemsPerPage)}statusClass(o){return o}returnClass(o){return o>=0?"green":"red"}openFilter(){this.showFilter=!this.showFilter}closeFilter(){this.showFilter=!1}apply(){this.showFilter=!1,this.applyFilters()}applyFilters(){this.goToPage(1)}goToPage(o){o<1&&(o=1),o>this.totalPages&&(o=this.totalPages),this.currentPage=o}prevPage(){this.goToPage(this.currentPage-1)}nextPage(){this.goToPage(this.currentPage+1)}toggleSort(){this.sortAsc=!this.sortAsc}getUserDate(o){return new Date(o)}emitUser(o){this.userSelected.emit(o)}static \u0275fac=function(i){return new(i||d)};static \u0275cmp=U({type:d,selectors:[["app-users-table"]],inputs:{users:"users"},outputs:{userSelected:"userSelected"},decls:74,vars:16,consts:[[1,"table-container","color-background","d-flex","flex-col","justify-between","p-24"],[1,"d-flex","flex-col"],[1,"d-flex","justify-between","items-center","mb-24"],[1,"table-titles"],[1,"subtitle","mb-6"],[1,"regularText"],[1,"table-actions-container","smallText","d-flex","items-center"],[1,"search-user-container","d-flex","items-center","p-10","mr-10"],["for","search-user",1,"mr-10"],[1,"material-icons","color-background",2,"font-size","20px"],["id","search-user","type","text","placeholder","Search user",1,"search-box","color-background","smallText",3,"ngModelChange","ngModel"],[1,"sort-Btn","regularText","color-secondary-300","p-10","mr-10",3,"click"],[1,"material-icons",2,"font-size","18px"],[1,"filter-container"],[1,"filter-btn","color-secondary-300","smallText","d-flex","items-center","p-10",3,"click"],[1,"material-icons","color-secondary-300",2,"font-size","20px"],[1,"filter-modal","py-20","px-24","d-flex","flex-col"],[1,"table-scroll-container"],[1,"regularText","py-18"],[1,"pagination-controls","d-flex","justify-between","items-center","mt-10","regularText"],[1,"page-controls","d-flex","justify-between","items-center"],[1,"side-controls","d-flex","items-center"],[1,"regularText",3,"click","disabled"],[1,"d-flex","items-center"],[1,"d-flex","justify-between","items-center","mt-10"],["for","page-input",1,"regularText","mr-10","pb-2"],["id","page-input","type","number",1,"page-input","p-8","smallText","color-background",2,"width","4rem",3,"ngModelChange","change","min","max","ngModel"],[1,"color-secondary-300","smallText","mt-10","ml-20",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"mt-10"],[1,"percentage-input","d-flex","items-center","justify-between","p-10"],["id","min-strat","type","number","placeholder","Min %",1,"search-box","color-background","smallText",3,"ngModelChange","ngModel"],["for","min-strat"],["id","max-strat","type","number","placeholder","Max %",1,"search-box","color-background","smallText",3,"ngModelChange","ngModel"],["for","max-strat"],[1,"filter-btn","p-10","bg-primary-400","color-bg-black","inputText",3,"click"],[1,"smallText",2,"width","10.5rem"],[1,"smallText",2,"width","12.5rem"],[1,"smallText"],[1,"material-icons","color-secondary-500",2,"font-size","1rem",3,"click"],[1,"progress-container","mt-6"],[1,"progress-bar-bg"],[1,"progress-bar-fill"]],template:function(i,e){i&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),r(5,"Users information"),n(),t(6,"p",5),r(7,"Monitor user info, contact, etc."),n()(),t(8,"div",6)(9,"div",7)(10,"label",8)(11,"span",9),r(12,"search"),n()(),t(13,"input",10),S("ngModelChange",function(s){return v(e.searchTerm,s)||(e.searchTerm=s),s}),n()(),t(14,"button",11),p("click",function(){return e.toggleSort()}),t(15,"span",12),r(16),n(),r(17," Sort by: A - Z "),n(),t(18,"div",13)(19,"button",14),p("click",function(){return e.openFilter()}),t(20,"span",15),r(21,"filter_list"),n(),r(22," Filter "),n(),x(23,Ee,13,2,"div",16),n()()(),t(24,"div",17)(25,"table",5)(26,"thead")(27,"tr")(28,"th",18),r(29,"First Name"),n(),t(30,"th",18),r(31,"Last Name"),n(),t(32,"th",18),r(33,"Email"),n(),t(34,"th",18),r(35,"Phone Number"),n(),t(36,"th",18),r(37,"Sus. From"),n(),t(38,"th",18),r(39,"% Strat. Followed"),n(),M(40,"th"),n()(),t(41,"tbody"),$(42,Oe,23,10,"tr",null,Y),n()()()(),t(44,"div",19)(45,"div",20)(46,"div",21)(47,"button",22),p("click",function(){return e.prevPage()}),t(48,"span",12),r(49,"chevron_left"),n()(),t(50,"button",22),p("click",function(){return e.goToPage(1)}),t(51,"span",12),r(52,"first_page"),n()()(),t(53,"span"),r(54),n(),t(55,"div",21)(56,"button",22),p("click",function(){return e.goToPage(e.totalPages)}),t(57,"span",12),r(58,"last_page"),n()(),t(59,"button",22),p("click",function(){return e.nextPage()}),t(60,"span",12),r(61,"chevron_right"),n()()()(),t(62,"div",23)(63,"div",24)(64,"label",25),r(65,"Go to page"),n(),t(66,"input",26),S("ngModelChange",function(s){return v(e.currentPage,s)||(e.currentPage=s),s}),p("change",function(){return e.goToPage(e.currentPage)}),n()(),t(67,"select",27),S("ngModelChange",function(s){return v(e.itemsPerPage,s)||(e.itemsPerPage=s),s}),p("change",function(){return e.goToPage(1)}),t(68,"option",28),r(69,"5 items"),n(),t(70,"option",28),r(71,"10 items"),n(),t(72,"option",28),r(73,"25 items"),n()()()()()),i&2&&(l(13),w("ngModel",e.searchTerm),l(3),P(e.sortAsc?"arrow_upward":"arrow_downward"),l(7),C(e.showFilter?23:-1),l(19),ee(e.paginatedUsers),l(5),_("disabled",e.currentPage===1),l(3),_("disabled",e.currentPage===1),l(4),I("Page ",e.currentPage," of ",e.totalPages),l(2),_("disabled",e.currentPage===e.totalPages),l(3),_("disabled",e.currentPage===e.totalPages),l(7),_("min",1)("max",e.totalPages),w("ngModel",e.currentPage),l(),w("ngModel",e.itemsPerPage),l(),_("value",5),l(2),_("value",10),l(2),_("value",25))},dependencies:[E,T,be,_e,L,ue,ge,R,he,fe,W,N],styles:[".table-container[_ngcontent-%COMP%]{background:radial-gradient(ellipse 36% 42% at top center,#5186e41a,#5186e403);border-radius:16px;border:.5px solid #434343;max-height:43rem;min-height:43rem}.table-container[_ngcontent-%COMP%]   .table-scroll-container[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto}.search-box[_ngcontent-%COMP%]{background-color:transparent;border:none}.search-box[_ngcontent-%COMP%]:focus{outline:none}.search-box[_ngcontent-%COMP%]::placeholder{color:#cfd8dc}.search-user-container[_ngcontent-%COMP%], .percentage-input[_ngcontent-%COMP%]{border-radius:6px}.search-user-container[_ngcontent-%COMP%]{border:1px solid var(--White, #eaf2f8)}.percentage-input[_ngcontent-%COMP%]{border:.5px solid #434343}.percentage-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:3rem}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-top:1px solid #2e3440}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:-2px;background-color:#151516;z-index:10;border-bottom:1px solid #444}.table-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.table-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#222b39;border-radius:6px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px 14px;text-align:left}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #2e3440}.status[_ngcontent-%COMP%]{border-radius:4px;width:100%}.purchased[_ngcontent-%COMP%]{background:#007aff26;color:#9fcdff}.pending[_ngcontent-%COMP%]{background:#ff950026;color:#ffc16b}.unverified[_ngcontent-%COMP%]{background:#49548626;color:#b5b4fd}.filter-btn[_ngcontent-%COMP%]{height:fit-content;border-radius:6px;border:none;cursor:pointer;text-decoration:none}.filter-modal[_ngcontent-%COMP%]{position:absolute;top:45px;right:0;background:radial-gradient(ellipse 36% 42% at top center,#5186e41a,#5186e403),#181a1d;border:.5px solid #4a4a4a;color:#e4e7ec;border-radius:6px;box-shadow:0 4px 16px #35353524;gap:16px;z-index:100}.filter-modal[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500}.filter-modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:#181a1d;border:.5px solid #434343;border-radius:6px;padding:7px}.filter-modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:fit-content;border-radius:6px;border:none;cursor:pointer}.filter-container[_ngcontent-%COMP%]{position:relative}.filter-btn[_ngcontent-%COMP%]{border-radius:6px;background:#9ec4f21a;border:none;gap:10px;cursor:pointer;transition:background .2s}.filter-btn[_ngcontent-%COMP%]:hover{background:#232939}.progress-container[_ngcontent-%COMP%]{width:100%}.progress-bar-bg[_ngcontent-%COMP%]{width:100%;height:7px;border-radius:6px;background:#202621;position:relative;overflow:hidden}.progress-bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:6px;background:#9bf526;transition:width .2s}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;color:#5186e4;border:none;cursor:pointer}.pagination-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:.25rem;background:#9ec4f21a;border:none;padding:7px}.pagination-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:#181a1d;border:none}.pagination-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:none}.pagination-controls[_ngcontent-%COMP%]   .side-controls[_ngcontent-%COMP%]{gap:1.25rem}.pagination-controls[_ngcontent-%COMP%]   .page-controls[_ngcontent-%COMP%]{gap:1.625rem}.pagination-controls[_ngcontent-%COMP%]   .page-input[_ngcontent-%COMP%]{background:transparent;border-radius:6px;border:1px solid var(--White, #eaf2f8)}.pagination-controls[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .pagination-controls[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.pagination-controls[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{appearance:textfield;-moz-appearance:textfield}.sort-Btn[_ngcontent-%COMP%]{border-radius:.375rem;background:#9ec4f21a;border:none}"]})};function De(d,o){if(d&1&&(r(0),t(1,"div",26)(2,"div",27),M(3,"div",28),n()()),d&2){let i=g();b(" ",i.user.strategy_followed,"% "),l(3),V("width",i.user.strategy_followed,"%")}}function Ve(d,o){d&1&&(t(0,"span"),r(1,"No stats available"),n())}var z=class d{user;close=new h;ban=new h;unban=new h;setPassword=new h;sendResetLink=new h;logoutEverywhere=new h;today=new Date;usernameToBan="";banReason="";get aov(){return this.user.total_spend&&this.user.number_trades?(this.user.total_spend/this.user.number_trades).toFixed(2):"0.00"}onlyNameInitials(o){return o.firstName.charAt(0)+o.lastName.charAt(0)}getUserDate(o){return new Date(o)}static \u0275fac=function(i){return new(i||d)};static \u0275cmp=U({type:d,selectors:[["app-user-modal"]],inputs:{user:"user"},outputs:{close:"close",ban:"ban",unban:"unban",setPassword:"setPassword",sendResetLink:"sendResetLink",logoutEverywhere:"logoutEverywhere"},decls:128,vars:22,consts:[["passwordInput",""],[1,"modal-backdrop",3,"click"],[1,"modal-content","regularText","color-background","p-24","d-inline-flex","flex-col","items-start"],[1,"title"],[1,"subtitle"],[1,"close-btn","color-secondary-500",3,"click"],[1,"user-details-header","d-flex","items-center"],[1,"avatar","smallText"],[1,"regularText"],[1,"section","d-flex","flex-col","items-start"],[1,"mb-16"],[1,"user-info","d-flex","flex-col","items-start"],[1,"user-item"],[1,"user-item-label"],[1,"strategy-progress"],["placeholder","Username",3,"ngModelChange","ngModel"],["placeholder","Reason",3,"ngModelChange","ngModel"],[1,"ban-btns","d-flex","items-center","justify-between"],[1,"ban-btn",3,"click"],[1,"btn","color-background",3,"click"],["type","password","placeholder","New password"],[1,"password-btn","btn","color-background",3,"click"],[1,"d-flex","flex-col",2,"width","60%","gap","10px"],[1,"btn","custom-btn","color-background",3,"click"],[1,"color-text-gray"],[1,"d-flex","flex-col",2,"width","48%","gap","10px"],[1,"progress-container","mt-6"],[1,"progress-bar-bg"],[1,"progress-bar-fill"]],template:function(i,e){if(i&1){let a=y();t(0,"div",1),p("click",function(){return c(a),m(e.close.emit())}),n(),t(1,"div",2)(2,"div",3)(3,"h2",4),r(4,"Information details"),n(),t(5,"button",5),p("click",function(){return c(a),m(e.close.emit())}),r(6," \xD7 "),n()(),t(7,"div",6)(8,"span",7),r(9),n(),t(10,"h2",8),r(11),n()(),t(12,"div",9)(13,"h3",10),r(14,"About User"),n(),t(15,"div",11)(16,"div",12)(17,"p",13),r(18,"Email"),n(),t(19,"p"),r(20),n()(),t(21,"div",12)(22,"p",13),r(23,"Phone number"),n(),t(24,"p"),r(25),n()(),t(26,"div",12)(27,"p",13),r(28,"Country"),n(),t(29,"p"),r(30,"United States"),n()(),t(31,"div",12)(32,"p",13),r(33,"City"),n(),t(34,"p"),r(35,"Omaha"),n()(),t(36,"div",12)(37,"p",13),r(38,"Region"),n(),t(39,"p"),r(40,"NE"),n()(),t(41,"div",12)(42,"p",13),r(43,"Postal code"),n(),t(44,"p"),r(45,"68102"),n()()()(),t(46,"div",9)(47,"h3",10),r(48,"About Activity"),n(),t(49,"div",11)(50,"div",12)(51,"p",13),r(52,"% Strat. Followed"),n(),t(53,"div",14),x(54,De,4,3),x(55,Ve,2,0,"span"),n()(),t(56,"div",12)(57,"p",13),r(58,"Orders"),n(),t(59,"p"),r(60),n()(),t(61,"div",12)(62,"p",13),r(63,"Total spend"),n(),t(64,"p"),r(65),n()(),t(66,"div",12)(67,"p",13),r(68,"AOV"),n(),t(69,"p"),r(70),n()(),t(71,"div",12)(72,"p",13),r(73,"Last active"),n(),t(74,"p"),r(75),O(76,"date"),n()(),t(77,"div",12)(78,"p",13),r(79,"Sus. From"),n(),t(80,"p"),r(81),O(82,"date"),n()()()(),t(83,"div",9)(84,"h3",10),r(85,"Account Management"),n(),t(86,"div",11)(87,"div",12)(88,"p",13),r(89,"ban"),n(),t(90,"div")(91,"input",15),S("ngModelChange",function(u){return c(a),v(e.usernameToBan,u)||(e.usernameToBan=u),m(u)}),n(),t(92,"input",16),S("ngModelChange",function(u){return c(a),v(e.banReason,u)||(e.banReason=u),m(u)}),n(),t(93,"div",17)(94,"button",18),p("click",function(){return c(a),m(e.ban.emit({username:e.usernameToBan,reason:e.banReason}))}),r(95," Ban "),n(),t(96,"button",19),p("click",function(){return c(a),m(e.unban.emit(e.usernameToBan))}),r(97," Unban "),n()()()()()(),t(98,"div",9)(99,"div",11)(100,"div",12)(101,"p",13),r(102,"New password"),n(),t(103,"div"),M(104,"input",20,0),t(106,"button",21),p("click",function(){c(a);let u=te(105);return m(e.setPassword.emit(u.value))}),r(107," Set New Password "),n()()()()(),t(108,"div",9)(109,"div",11)(110,"div",12)(111,"p",13),r(112,"Password reset"),n(),t(113,"div",22)(114,"button",23),p("click",function(){return c(a),m(e.sendResetLink.emit(e.user.email))}),r(115," Send Reset Link "),n(),t(116,"small",24),r(117),n()()()()(),t(118,"div",9)(119,"div",11)(120,"div",12)(121,"p",13),r(122,"Session"),n(),t(123,"div",25)(124,"button",23),p("click",function(){return c(a),m(e.logoutEverywhere.emit(e.user.id))}),r(125," Log Out Everywhere "),n(),t(126,"small",24),r(127),n()()()()()()}i&2&&(l(9),b("",e.onlyNameInitials(e.user)," "),l(2),I("",e.user.firstName," ",e.user.lastName),l(9),P(e.user.email),l(5),P(e.user.phoneNumber),l(29),C(e.user.strategy_followed!==void 0?54:-1),l(),C(e.user.strategy_followed===void 0?55:-1),l(5),P(e.user.number_trades),l(5),b("$",e.user.total_spend?e.user.total_spend.toFixed(2):"0.00"),l(5),b("$",e.aov),l(5),P(D(76,16,e.today,"MMMM d, yyyy")),l(6),P(D(82,19,e.getUserDate(e.user.subscription_date),"M/d/yy")),l(10),w("ngModel",e.usernameToBan),l(),w("ngModel",e.banReason),l(25),b("Send ",e.user.firstName," a link to reset their password. This will not change their password, nor will it force a change."),l(10),b("Log ",e.user.firstName," out of all locations."))},dependencies:[T,L,R,W,E,N],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000b3;z-index:998}.modal-content[_ngcontent-%COMP%]{position:fixed;top:10%;left:50%;transform:translate(-50%);gap:24px;background:#202020;border-radius:.5rem;border:.5px solid #434343;background:linear-gradient(to bottom right,var(--Rectangle890, rgba(234, 242, 248, .1)) 0%,rgba(234,242,248,.01) 50%) bottom right/50% 50% no-repeat,linear-gradient(to bottom left,var(--Rectangle890, rgba(234, 242, 248, .1)) 0%,rgba(234,242,248,.01) 50%) bottom left/50% 50% no-repeat,linear-gradient(to top left,var(--Rectangle890, rgba(234, 242, 248, .1)) 0%,rgba(234,242,248,.01) 50%) top left/50% 50% no-repeat,linear-gradient(to top right,var(--Rectangle890, rgba(234, 242, 248, .1)) 0%,rgba(234,242,248,.01) 50%) top right/50% 50% no-repeat,#151516;width:600px;z-index:999;max-height:80%;overflow-y:auto}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#222b39;border-radius:6px}.user-info[_ngcontent-%COMP%]{gap:.5rem}.user-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1.5rem;align-self:stretch}.user-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:flex;padding:8px;justify-content:space-between;align-items:center;align-self:stretch;border-radius:.375rem;border:1px solid var(--Grays-Gray, #8e8e93);color:#fff;background-color:transparent;margin-bottom:8px}.user-item-label[_ngcontent-%COMP%]{width:12.5rem;font-weight:700}.close-btn[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;border:none;background:transparent;font-size:2rem;cursor:pointer}.ban-btns[_ngcontent-%COMP%]{width:100%;gap:.5rem}.ban-btn[_ngcontent-%COMP%]{width:100%;padding:10px;color:#9bf526;border-radius:6px;border:1px solid #9bf526;background:#bcfe631a;cursor:pointer}.btn[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:6px;background:transparent;border:1px solid var(--White, #eaf2f8);cursor:pointer}.custom-btn[_ngcontent-%COMP%]{width:fit-content}.section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.progress-bar-bg[_ngcontent-%COMP%]{background:#222;border-radius:6px;height:8px;width:120px;margin:.5rem 0}.progress-bar-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#a7ff4a,#285f1d);height:8px;border-radius:6px}"]})};Se();var q=class d{constructor(o){this.platformId=o;if(this.isBrowser=ne(this.platformId),this.isBrowser){let{firebaseApp:i}=(Pe(),ve(Me));this.db=re(i)}}isBrowser;db=null;getAllUsers(){return f(this,null,function*(){if(!this.db)return console.warn("Firestore not available in SSR"),[];try{let o=yield B(F(this.db,"users")),i=[];return o.forEach(e=>{let a=e.data();a.id=e.id,i.push(a)}),i}catch(o){return console.error("Error getting all users:",o),[]}})}getUserById(o){return f(this,null,function*(){if(!this.db)return console.warn("Firestore not available in SSR"),null;try{let i=yield se(A(this.db,"users",o));if(i.exists()){let e=i.data();return e.id=i.id,e}return null}catch(i){return console.error("Error getting user by ID:",i),null}})}updateUser(o,i){return f(this,null,function*(){if(!this.db){console.warn("Firestore not available in SSR");return}try{yield le(A(this.db,"users",o),i)}catch(e){throw console.error("Error updating user:",e),e}})}deleteUser(o){return f(this,null,function*(){if(!this.db){console.warn("Firestore not available in SSR");return}try{yield de(A(this.db,"users",o))}catch(i){throw console.error("Error deleting user:",i),i}})}getUsersByStatus(o){return f(this,null,function*(){if(!this.db)return console.warn("Firestore not available in SSR"),[];try{let i=Z(F(this.db,"users"),ie("status","==",o)),e=yield B(i),a=[];return e.forEach(s=>{let u=s.data();u.id=s.id,a.push(u)}),a}catch(i){return console.error("Error getting users by status:",i),[]}})}getTopUsers(o=10){return f(this,null,function*(){if(!this.db)return console.warn("Firestore not available in SSR"),[];try{let i=Z(F(this.db,"users"),oe("number_trades","desc"),ae(o)),e=yield B(i),a=[];return e.forEach(s=>{let u=s.data();u.id=s.id,a.push(u)}),a}catch(i){return console.error("Error getting top users:",i),[]}})}static \u0275fac=function(i){return new(i||d)(Q(X))};static \u0275prov=K({token:d,factory:d.\u0275fac,providedIn:"root"})};function Ne(d,o){if(d&1){let i=y();t(0,"app-user-modal",7),p("close",function(){c(i);let a=g();return m(a.selectedUser=null)})("ban",function(a){c(i);let s=g();return m(s.onBan(a))})("unban",function(a){c(i);let s=g();return m(s.onUnban(a))})("setPassword",function(a){c(i);let s=g();return m(s.onSetPassword(a))})("sendResetLink",function(a){c(i);let s=g();return m(s.onSendResetLink(a))})("logoutEverywhere",function(a){c(i);let s=g();return m(s.onLogoutEverywhere(a))}),n()}if(d&2){let i=g();_("user",i.selectedUser)}}var we=class d{constructor(o,i,e,a){this.store=o;this.userManagementService=i;this.userSvc=e;this.appContext=a}topUsers=[];selectedUser=null;loading=!1;usersData=[];ngOnInit(){this.subscribeToContextData(),this.loadConfig()}subscribeToContextData(){this.appContext.currentUser$.subscribe(o=>{o&&o.isAdmin&&this.loadUsersData()}),this.appContext.isLoading$.subscribe(o=>{this.loading=o.user}),this.appContext.errors$.subscribe(o=>{o.user&&console.error("Error en gesti\xF3n de usuarios:",o.user)})}loadConfig(){this.getUsersData()}loadUsersData(){this.getUsersData()}getUsersData(){return f(this,null,function*(){try{let o=yield this.userManagementService.getAllUsers();this.usersData=o.filter(i=>!i.isAdmin),this.loading=!1}catch(o){this.loading=!1,console.error("Error getting users data:",o)}})}onBan(o){o.username===this.selectedUser?.firstName?this.userSvc.createUser(H(G({},this.selectedUser),{status:"banned"})):alert("Use the firstName as Username to ban the user")}onUnban(o){o===this.selectedUser?.firstName?this.userSvc.createUser(H(G({},this.selectedUser),{status:"purchased"})):alert("Use the firstName as Username to unban the user")}onSetPassword(o){}onSendResetLink(o){}onLogoutEverywhere(o){}static \u0275fac=function(i){return new(i||d)(k(pe),k(q),k(me),k(ce))};static \u0275cmp=U({type:d,selectors:[["app-users-details"]],decls:9,vars:3,consts:[[1,"main-titles","color-background","d-flex","flex-col","mb-50"],[1,"titleText","mb-32"],[1,"regularText"],[1,"middle-container","justify-between","d-flex","mb-24"],[3,"userSelected","users"],[3,"visible"],[3,"user"],[3,"close","ban","unban","setPassword","sendResetLink","logoutEverywhere","user"]],template:function(i,e){i&1&&(t(0,"div",0)(1,"h1",1),r(2,"Users"),n(),t(3,"h3",2),r(4," View and manage user accounts with full visibility and control. "),n()(),t(5,"div",3)(6,"app-users-table",4),p("userSelected",function(s){return e.selectedUser=s}),n()(),M(7,"app-loading-popup",5),x(8,Ne,1,1,"app-user-modal",6)),i&2&&(l(6),_("users",e.usersData),l(),_("visible",e.loading),l(),C(e.selectedUser?8:-1))},dependencies:[E,xe,T,j,z],styles:["app-users-table[_ngcontent-%COMP%]{width:100%}"]})};export{we as UsersDetails};
