<div class="pnl-graph-container d-flex flex-col items-start">
  <div class="ml-10 up-title">
    <div class="color-background">
      <p class="regularText">Total Profit</p>
      <p class="secondTitle">${{ getFormatedValue(getTotalProfit) }}</p>
    </div>
    
    <!-- Filter Section -->
    <div class="filter-section">
      <!-- Active Date Filter -->
      <div class="active-filters-container" *ngIf="selectedStartDate || selectedEndDate">
        <div class="filter-chip">
          <span class="filter-label">
            {{ selectedStartDate | date:'short' }} - {{ selectedEndDate | date:'short' }}
          </span>
          <button class="remove-filter-btn" (click)="clearDateFilter()">
            <span class="material-symbols-outlined" style="font-size: 18px;">close</span>
          </button>
        </div>
      </div>
      
      <!-- Controls Row -->
      <div class="controls-row d-flex align-items-center gap-12">
        <button class="filter-btn" (click)="toggleDateFilter()">
          <span>Date Filter</span>
          <span class="material-symbols-outlined filter-icon" style="font-size: 20px;">calendar_today</span>
        </button>
      </div>
      
      <!-- Date Filter Dropdown -->
      <div class="filter-dropdown" *ngIf="showDateFilter">
        <div class="filter-dropdown-content">
          <div class="date-filter-section">
            <h4 class="filter-title">Filter by Date Range</h4>
            <div class="date-inputs-container">
              <div class="date-input-group">
                <label class="date-label">From:</label>
                <input 
                  type="date" 
                  class="date-input"
                  [value]="selectedStartDate"
                  (change)="onStartDateSelected($any($event.target).value)"
                >
              </div>
              <div class="date-input-group">
                <label class="date-label">To:</label>
                <input 
                  type="date" 
                  class="date-input"
                  [value]="selectedEndDate"
                  (change)="onEndDateSelected($any($event.target).value)"
                >
              </div>
            </div>
            <div class="filter-actions">
              <button class="apply-btn" (click)="applyDateFilter()">
                Apply
              </button>
              <button class="clear-btn" (click)="clearDateFilter()">
                Clear
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <apx-chart
    [series]="chartOptions.series"
    [chart]="chartOptions.chart"
    [xaxis]="chartOptions.xaxis"
    [yaxis]="chartOptions.yaxis"
    [stroke]="chartOptions.stroke"
    [fill]="chartOptions.fill"
    [grid]="chartOptions.grid"
    [dataLabels]="chartOptions.dataLabels"
    [tooltip]="chartOptions.tooltip"
    style="width: 100%"
  ></apx-chart>
</div>
