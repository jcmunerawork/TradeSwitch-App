<div class="main-titles color-background d-flex flex-col mb-32">
  <div class="d-flex justify-between align-items-center mb-12">
    <h1 class="titleText">My Trading Accounts</h1>
    <button class="add-account-header-btn d-flex align-items-center gap-8" (click)="onAddAccount()">
      <span class="material-symbols-outlined" style="font-size: 20px;">add</span>
      <span>Add Account</span>
    </button>
  </div>
  <h3 class="regularText">
    View and manage all your connected trading accounts in one place.
  </h3>
</div>

<!-- Plan Banner -->
@if (showUpgradeModal) {
  <div class="plan-banner plan-banner-warning">
    <div class="banner-content">
      <div class="banner-icon">
        <span class="icon-info"></span>
      </div>
      <div class="banner-message">
        <span>{{ upgradeModalMessage }}</span>
        <span class="upgrade-link" (click)="onSeeUpgradeOptions()">Upgrade anytime.</span>
      </div>
      <button class="banner-close" (click)="onCloseUpgradeModal()">
        <span class="icon-close">×</span>
      </button>
    </div>
  </div>
  }

<!-- Content Area -->
<div class="middle-container justify-between d-flex mb-24">
  @if(usersData && usersData.length > 0) {
  <app-accounts-table
    [accounts]="usersData"
    (delete)="deleteAccount($event)"
  ></app-accounts-table>
  } @else if(!loading) {
  <!-- Empty State -->
  <div class="empty-strategies d-flex flex-col align-items-center">
    <div class="empty-icon">
      <span class="material-symbols-outlined" style="font-size: 28px;">group_add</span>
    </div>
    <h3 class="empty-title">No trading accounts found</h3>
    <p class="empty-description">You need to add a trading account before creating strategies.</p>
    <button class="create-first-btn" (click)="onAddAccount()">
      Add Trading Account
    </button>
  </div>
  }
</div>

<app-loading-popup [visible]="loading"></app-loading-popup>

<!-- Create Account Popup -->
<app-create-account-popup
  [visible]="showAddAccountModal"
  [userId]="user?.id || ''"
  [currentAccountCount]="usersData.length"
  (close)="onCloseAddAccountModal()"
  (create)="onAccountCreated($event)"
  (cancel)="onAccountCanceled()"
></app-create-account-popup>

<!-- Upgrade Modal
@if (showUpgradeModal) {
  <div class="modal-overlay" (click)="onCloseUpgradeModal()">
    <div class="upgrade-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title">Ready to expand your trading?</h2>
        <button class="modal-close" (click)="onCloseUpgradeModal()">
          <span class="icon-close">×</span>
        </button>
      </div>
      <div class="modal-body">
        <p class="modal-message">{{ upgradeModalMessage }}</p>
      </div>
      <div class="modal-footer">
        <button class="upgrade-btn" (click)="onSeeUpgradeOptions()">
          See upgrade options
        </button>
      </div>
    </div>
  </div>
}-->