<div class="password-input-container">
  <label class="input-label">{{ label }}</label>
  <div class="password-input-wrapper">
    <input
      type="{{ showPassword ? 'text' : 'password' }}"
      class="password-input"
      [placeholder]="placeholder"
      [required]="required"
      [disabled]="disabled"
      (input)="onInput($event)"
      (blur)="onBlur()"
      [value]="value"
    />
    <button
      type="button"
      class="toggle-password"
      (click)="togglePasswordVisibility()"
    >
      <span class="material-symbols-outlined" style="font-size: 20px;">
        {{ showPassword ? 'visibility' : 'visibility_off' }}
      </span>
    </button>
  </div>
  
  @if (showValidation && value) {
  <div class="password-validation">
    <div class="password-strength">
      <span class="strength-label">Password strength:</span>
      <span class="strength-value" [style.color]="strengthColor">{{ passwordStrength }}</span>
    </div>
    
    <div class="validation-rules">
      <div class="validation-rule" [class.valid]="passwordValidations.noNameOrEmail">
        <span class="material-symbols-outlined validation-icon" [class.valid]="passwordValidations.noNameOrEmail" [class.invalid]="!passwordValidations.noNameOrEmail" style="font-size: 16px;">
          {{ passwordValidations.noNameOrEmail ? 'check' : 'close' }}
        </span>
        <span class="validation-text">Cannot contain the name or email address</span>
      </div>
      
      <div class="validation-rule" [class.valid]="passwordValidations.minLength">
        <span class="material-symbols-outlined validation-icon" [class.valid]="passwordValidations.minLength" [class.invalid]="!passwordValidations.minLength" style="font-size: 16px;">
          {{ passwordValidations.minLength ? 'check' : 'close' }}
        </span>
        <span class="validation-text">At least 8 characters long</span>
      </div>
      
      <div class="validation-rule" [class.valid]="passwordValidations.hasNumberOrSymbol">
        <span class="material-symbols-outlined validation-icon" [class.valid]="passwordValidations.hasNumberOrSymbol" [class.invalid]="!passwordValidations.hasNumberOrSymbol" style="font-size: 16px;">
          {{ passwordValidations.hasNumberOrSymbol ? 'check' : 'close' }}
        </span>
        <span class="validation-text">At least 1 number or symbol</span>
      </div>
      
      <div class="validation-rule" [class.valid]="passwordValidations.hasUppercase">
        <span class="material-symbols-outlined validation-icon" [class.valid]="passwordValidations.hasUppercase" [class.invalid]="!passwordValidations.hasUppercase" style="font-size: 16px;">
          {{ passwordValidations.hasUppercase ? 'check' : 'close' }}
        </span>
        <span class="validation-text">At least 1 uppercase letter</span>
      </div>
      
      <div class="validation-rule" [class.valid]="passwordValidations.hasLowercase">
        <span class="material-symbols-outlined validation-icon" [class.valid]="passwordValidations.hasLowercase" [class.invalid]="!passwordValidations.hasLowercase" style="font-size: 16px;">
          {{ passwordValidations.hasLowercase ? 'check' : 'close' }}
        </span>
        <span class="validation-text">At least 1 lowercase letter</span>
      </div>
    </div>
  </div>
  }
</div>
